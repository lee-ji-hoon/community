<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head th:replace="theme-fragments.html :: head"></head>

<body>


<div id="wrapper">
    <!-- header-->
    <header th:replace="theme-fragments.html :: header"></header>
    <div sec:authorize="isAuthenticated()" th:replace="theme-fragments.html :: side_bar(currentSideMenu='index')"></div>

    <div class="alert alert-warning" role="alert" th:if="${account != null && !account.emailVerified}">
        멀티커뮤니티 가입을 완료하려면 <a href="#" th:href="@{/check-email}" class="alert-link">계정 인증 이메일을 확인</a>하세요.
    </div>

    <div class="main_content">
        <div class="mcontainer">
            <div th:text="${account.alarmList.size()}"></div>
            <!--<ul>
                <li th:each="alarm : ${account.alarmList}">
                    <th:block th:if="${!alarm.isChecked()}">
                        <a th:href="@{'/alarm/' + ${alarm.alarmId}}">
                            <svg th:if="${#strings.isEmpty(alarm.fromAccount.profileImage)}"
                                 th:data-jdenticon-value="${alarm.fromAccount.studentId}"
                                 alt="" class="rounded-full shadow w-12 h-12 is_avatar"></svg>
                            <img th:if="${!#strings.isEmpty(alarm.fromAccount.profileImage)}"
                                 th:src="${alarm.fromAccount.profileImage}"
                                 alt="" class="rounded-full shadow w-12 h-12 is_avatar"/>

                            <span th:if="${alarm.alarmType.equals(alarm.alarmType.LIKES)}" class="drop_icon bg-gradient-primary">
                                 <i class="icon-feather-thumbs-up"></i>
                            </span>
                            <div class="drop_text">
                                <p>
                                    <strong th:text="${alarm.fromAccount.nickname}"> ezhoon </strong>
                                    <span th:if="${alarm.alarmType.equals(alarm.alarmType.LIKES)}">님이 회원님의 글을 좋아합니다.</span>
                                    <span th:if="${alarm.alarmType.equals(alarm.alarmType.BOARD_REPLY)}">님의 게시글에 댓글이 달렸습니다.</span>
                                    <span th:if="${alarm.alarmType.equals(alarm.alarmType.MEETING_REPLY)}">님이 모임글에 댓글이 달렸습니다.</span>
                                    <span th:if="${alarm.alarmType.equals(alarm.alarmType.MEETING)}">님의 스터디에 모임이 생성됐습니다.</span>
                                    <span th:if="${alarm.alarmType.equals(alarm.alarmType.STUDY)}">님의 관심사에 해당하는 스터디가 생성됐습니다.</span>
                                    <br>
                                    <span th:text="${alarm.title}" class="text-link">게시물 제목 </span>
                                </p>
                                <time th:text="${account.dateTime(alarm.createAlarmTime)}"> 2시간 전 </time>
                            </div>
                        </a>
                    </th:block>

                </li>
            </ul>-->

            <div class="lg:flex lg:space-x-10">

                <div class="lg:w-2/3">
                    <div class="md:mb-4 mb-3">
                        <div class="my-1 flex justify-between">
                            <h2 class="text-2xl font-semibold"> 최근 공지사항 </h2>
                            <a th:href="@{/council}" class="text-blue-500"> 전체 보기 </a>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 divide divide-gray-200 gap-x-4 mt-4">
                        <div class="card px-3 mb-2" th:each="c_notice : ${notice}">
                            <div class="flex items-center space-x-4 py-3 hover:bg-gray-100 rounded-md -mx-2 px-2" >
                                <div class="flex-1">
                                    <a th:href="@{/council/detail/{cid}(cid = ${c_notice.cid})}" class="text-base font-semibold capitalize line-clamp-1" th:text="${c_notice.postTitle}"> 제목 </a>
                                    <div class="text-sm text-gray-500 mt-0.5"><a th:text="${c_notice.pageView}"></a> 조회</div>
                                </div>
                                <a th:href="@{/council/detail/{cid}(cid = ${c_notice.cid})}" class="flex items-center justify-center h-9 px-4 rounded-md bg-gray-200 font-semibold">
                                    확인하기
                                </a>
                            </div>
                        </div>
                    </div>
                    <br>

                    <!-- Clips -->
                    <div class="my-2 flex justify-between pb-3">
                        <h5 class="text-lg font-semibold"> 내가 참여중인 스터디 ✏️ </h5>
                        <a href="#" th:href="@{/study}" class="text-blue-500"> 전체 보기 </a>
                    </div>
                    <div class="divide-y -mt-3 card px-5 py-2 mb-7" th:if="${enrollStudy.size + myStudy.size() != 0}">

                        <div th:replace="theme-fragments.html :: studyLists (type = ${enrollStudy})"></div>
                        <div th:replace="theme-fragments.html :: studyLists (type = ${myStudy})"></div>
                    </div>
                    <div class="my-2 flex justify-between pb-3">
                        <h5 class="text-lg font-semibold"> 인기 게시글 🔥 </h5>
                        <a th:href="@{/board}" class="text-blue-500"> 전체 보기 </a>
                    </div>
                    <div>
                        <div class="card divide-y divide-gray-100 px-4 mb-4" th:each="board : ${board}">
                            <div class="lg:flex lg:space-x-6 py-3">
                                <div class="flex-1 lg:pt-0 pt-0">
                                    <div class="flex">
                                        <div class="flex-none align-middle pt-2.5 mr-2">
                                            <th:block th:if="${board.boardTitle=='자유'}">
                                                <div class=" bg-blue-100 font-semibold w-11 h-5 px-2.5 py-1 rounded-full text-center text-xs text-blue-500" th:text="${board.boardTitle}"></div>
                                            </th:block>
                                            <th:block th:if="${board.boardTitle=='정보'}">
                                                <div class="bg-purple-100 font-semibold w-11 h-5 px-2.5 py-1 rounded-full text-center text-xs text-purple-500" th:text="${board.boardTitle}"></div>
                                            </th:block>
                                            <th:block th:if="${board.boardTitle=='질문'}">
                                                <div class="bg-yellow-100 font-semibold w-11 h-5 px-2.5 py-1 rounded-full text-center text-xs text-yellow-500" th:text="${board.boardTitle}"></div>
                                            </th:block>
                                        </div>
                                        <a th:href="@{/board/detail/{boardId}(boardId = ${board.bid})}" class="flex-initial text-lg mt-2 font-semibold line-clamp-1" th:text="${board.title}"></a>
                                    </div>

                                    <div class="flex items-center pt-3 align-middle">
                                        <div class="flex items-center">
                                            <ion-icon name="time-outline" class="mr-2"></ion-icon>
                                            <a class="text-xs" th:text="${service.boardDateTime(board.uploadTime)}"></a>
                                        </div>
                                        <div class="flex items-center mx-4 align-middle">
                                            <ion-icon name="thumbs-up-outline" class="mr-2"></ion-icon>
                                            <a class="text-xs" th:text="${likeService.boardLikeSize(board)}"></a>
                                        </div>
                                        <div class="flex items-center align-middle">
                                            <ion-icon name="chatbubble-ellipses-outline"  class="mr-2"></ion-icon><a class="text-xs" th:text="${replyService.boardReplySize(board)}"></a>
                                            <th:block th:if="${replyService.boardReplyPresent(board)}">
                                                <div class="-space-x-2 flex items-center ml-1">
                                                    <div th:each="topReply : ${replyService.boardsReplyTop3List(board)}">
                                                        <svg th:if="${#strings.isEmpty(topReply.getAccount()?.profileImage)}"
                                                             th:data-jdenticon-value="${topReply.getAccount().studentId}"
                                                             alt="" class="border-2 border-white rounded-full w-5 is_avatar" style="width: 20px; height: 20px"></svg>
                                                        <img th:if="${!#strings.isEmpty(topReply.getAccount()?.profileImage)}"
                                                             th:src="${topReply.getAccount()?.profileImage}"
                                                             alt="" class="border-2 border-white rounded-full w-5 is_avatar"/>
                                                    </div>
                                                </div>
                                            </th:block>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="lg:w-1/3 w-full lg:mt-0 mt-7">
                    <div uk-sticky="offset:100" class="uk-sticky">
                        <div class="mb-2">
                            <div class="text-xl font-semibold mb-1"> What Happened Today❓</div>
                            <div class="text-gray-400"> 오늘 발생한 이벤트 입니다. </div>
                        </div>
                        <div class="card mb-6">
                            <div class="p-5">
                                <div class="flex-1 relative sm:mt-0 mt-3 mb-3">
                                    <a th:href="@{/board}" class="text-lg font-semibold line-clamp-2"> 오늘 올라온 게시물 </a>
                                    <div class="mt-1 text-sm font-medium"><a th:text="${b_today}"></a>개 업로드</div>
                                    <div class="mt-3">
                                        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700"  data-tippy-placement="top">
                                            <div class="bg-blue-600 h-2.5 rounded-full" th:style="|width: ${b_today}%|"></div>
                                        </div>
                                    </div>
                                </div>
                                <hr class="my-4">
                                <div class="flex-1 relative sm:mt-0 mt-3 mb-3">
                                    <a th:href="@{/board}" class="text-lg font-semibold line-clamp-2"> 오늘 달린 댓글 </a>
                                    <div class="mt-1 text-sm font-medium"><a th:text="${r_today}"></a>개 업로드</div>
                                    <div class="mt-3">
                                        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700" data-tippy-placement="top">
                                            <div class="bg-blue-600 h-2.5 rounded-full" th:style="|width: ${r_today}%|"></div>
                                        </div>
                                    </div>
                                </div>
                                <hr class="my-4">
                                <div class="flex-1 relative sm:mt-0 mt-3 mb-3">
                                    <a th:href="@{/study}" class="text-lg font-semibold line-clamp-2"> 오늘 올라온 스터디 </a>
                                    <div class="mt-1 text-sm font-medium"><a th:text="${s_today}"></a>개 업로드</div>
                                    <div class="mt-3">
                                        <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700" data-tippy-placement="top">
                                            <div class="bg-blue-600 h-2.5 rounded-full" th:style="|width: ${s_today}%|"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="text-xl font-semibold mb-1"> We're here to help 🙋</div>
                            <div class="text-gray-400"> 도움이 필요하면 아래를 참고해주세요. </div>
                        </div>

                        <ul class="space-y-3.5 mt-5" uk-accordion>
                            <li class="bg-gray-100 rounded-lg py-2.5 px-3">
                                <a class="uk-accordion-title text-base font-semibold" href="#">회원 탈퇴는 어떻게 하나요?</a>
                                <div class="uk-accordion-content mt-2.5">
                                    <p>탈출구는 없습니다. 탈출구는 없습니다. 탈출구는 없습니다. 탈출구는 없습니다. 탈출구는 없습니다.</p>
                                    <a href="#" class="block font-medium mt-3 text-blue-600 text-sm"> See full article</a>
                                </div>
                            </li>
                            <li class="bg-gray-100 rounded-lg py-2.5 px-3">
                                <a class="uk-accordion-title text-base font-semibold" href="#">이런 사이트는 어떻게 만드나요?</a>
                                <div class="uk-accordion-content mt-2.5">
                                    <p>잘 하면 됩니다. 잘 하면 됩니다. 잘 하면 됩니다. 잘 하면 됩니다. 잘 하면 됩니다. 잘 하면 됩니다.</p>
                                    <a href="#" class="block font-medium mt-3 text-blue-600 text-sm"> See full article</a>
                                </div>
                            </li>
                            <li class="bg-gray-100 rounded-lg py-2.5 px-3">
                                <a class="uk-accordion-title text-base font-semibold" href="#">스프링 공부는 어떻게 하나요?</a>
                                <div class="uk-accordion-content mt-2.5">
                                    <p>알아서 잘 하면 됩니다. 알아서 잘 하면 됩니다. 알아서 잘 하면 됩니다. 알아서 잘 하면 됩니다. </p>
                                    <a href="#" class="block font-medium mt-3 text-blue-600 text-sm"> See full article</a>
                                </div>
                            </li>
                            <li class="bg-gray-100 rounded-lg py-2.5 px-3">
                                <a class="uk-accordion-title text-base font-semibold" href="#">모욕을 당했어요 어떻게 신고하나요?</a>
                                <div class="uk-accordion-content mt-2.5">
                                    <p>넌 나에게 모욕감을 줬어.. 넌 나에게 모욕감을 줬어.. 넌 나에게 모욕감을 줬어.. 넌 나에게 모욕감을 줬어..</p>
                                    <a href="#" class="block font-medium mt-3 text-blue-600 text-sm"> See full article</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>

        </div>
    </div>

</div>
<script type="application/javascript">
    $('.refresh_alarm').load(location.href+' .refresh_alarm');
</script>
</body>
</html>