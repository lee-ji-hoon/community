<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="theme-fragments.html :: head"></head>
<body class="is_message">



<div id="Wrapper" class="is-small">

        <!-- Header -->
        <header th:replace="theme-fragments.html :: header"></header>

        <!-- sidebar -->
        <div th:replace="theme-fragments.html :: side_bar"></div>

        <!-- Main Contents -->
        <div class="main_content">

            <!--<span uk-toggle="target: .message-content;" class="fixed left-0 top-36 bg-red-600 z-10 py-1 px-4 rounded-r-3xl text-white"> Users</span>-->

            <div class="messages-container">
                <div class="messages-container-inner">


                    <div class="messages-inbox">
                        <div class="messages-headline">
                            <div class="input-with-icon" hidden>
                                    <input id="autocomplete-input" type="text" placeholder="Search">
                                <i class="icon-material-outline-search"></i>
                            </div>
                            <h2 class="text-2xl font-semibold">Chats</h2>
                            <span class="absolute icon-feather-edit mr-4 text-xl uk-position-center-right cursor-pointer"></span>
                        </div>
                        <div class="messages-inbox-inner" data-simplebar>
                            <ul>
                                <li th:each="room : ${myRooms}">
                                    <a href="#" th:uk-toggle="|target: #roomNum${room.roomId};|">
                                        <div class="message-avatar">
                                            <i class="status-icon status-online"></i>
                                            <th:block th:if="${account == room.roomAttender}">
                                                <svg th:if="${#strings.isEmpty(room.roomHost?.profileImage)}"
                                                     th:data-jdenticon-value="${room.roomHost.studentId}" style="width: 40px; height: 40px;"
                                                     alt=""></svg>
                                                <img th:if="${!#strings.isEmpty(room.roomHost?.profileImage)}"
                                                     th:src="${room.roomHost?.profileImage}"
                                                     alt=""/>
                                            </th:block>
                                            <th:block th:if="${account == room.roomHost}">
                                                <svg th:if="${#strings.isEmpty(room.roomAttender?.profileImage)}"
                                                     th:data-jdenticon-value="${room.roomAttender.studentId}" style="width: 40px; height: 40px;"
                                                     alt=""></svg>
                                                <img th:if="${!#strings.isEmpty(room.roomAttender?.profileImage)}"
                                                     th:src="${room.roomAttender?.profileImage}"
                                                     alt=""/>
                                            </th:block>
                                        </div>
                                        <div class="message-by">
                                            <div class="message-by-headline">
                                                <th:block th:if="${account == room.roomAttender}">
                                                    <h5 th:text="${room.roomHost.nickname}"> 받는 사람 닉네임</h5>
                                                </th:block>
                                                <th:block th:if="${account == room.roomHost}">
                                                    <h5 th:text="${room.roomAttender.nickname}"> 받는 사람 닉네임</h5>
                                                </th:block>
                                                <span th:text="${account.dateTime(room.lastSendTime)}"></span>
                                            </div>
                                            <p th:text="${room.lastSendMsg}">내용</p>
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <th:block th:each="chatRoom : ${myRooms}">
                        <div class="message-content" th:id="|roomNum${chatRoom.roomId}|" aria-hidden="true" hidden>

                            <div class="messages-headline">
                                <th:block th:if="${account == chatRoom.roomAttender}">
                                    <h4 th:text="${chatRoom.roomHost.nickname}">상대방 닉네임</h4>
                                </th:block>
                                <th:block th:if="${account == chatRoom.roomHost}">
                                    <h4 th:text="${chatRoom.roomAttender.nickname}">상대방 닉네임</h4>
                                </th:block>
                                <a href="#" class="message-action text-blue-500 flex-none" th:uk-toggle="|target: #roomNum${chatRoom.roomId};|">
                                    <ion-icon name="arrow-back-outline" class="w-6 h-6"></ion-icon>
                                </a>
                            </div>

                            <div class="message-content-scrolbar" data-simplebar>

                                <!-- Message Content Inner -->
                                <div class="message-content-inner">

                                    <!-- Time Sign -->
                                    <div class="message-time-sign">
                                        <span>28 June, 2020</span>
                                    </div>
                                    <th:block th:each="chat : ${chatRoom.chatList}">
                                        <th:block th:if="${chat.sender == account}">
                                            <div class="message-bubble me">
                                                <div class="message-bubble-inner">
                                                    <div class="message-avatar">
                                                        <!--<img src="assets/images/avatars/avatar-2.jpg" alt="">-->
                                                        <svg th:if="${#strings.isEmpty(account?.profileImage)}"
                                                             th:data-jdenticon-value="${account.studentId}" style="width: 40px; height: 40px;"
                                                             alt=""></svg>
                                                        <img th:if="${!#strings.isEmpty(account?.profileImage)}"
                                                             th:src="${account?.profileImage}"
                                                             alt=""/>
                                                    </div>
                                                    <div class="message-text"><p th:text="${chat.content}">내용</p></div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </th:block>
                                        <th:block th:if="${chat.sender != account}">
                                            <div class="message-bubble">
                                                <div class="message-bubble-inner">
                                                    <div class="message-avatar">
                                                        <svg th:if="${#strings.isEmpty(chat.sender?.profileImage)}"
                                                             th:data-jdenticon-value="${chat.sender.studentId}" style="width: 40px; height: 40px;"
                                                             alt=""></svg>
                                                        <img th:if="${!#strings.isEmpty(chat.sender?.profileImage)}"
                                                             th:src="${chat.sender?.profileImage}"
                                                             alt=""/>
                                                    </div>
                                                    <div class="message-text"><p th:text="${chat.content}">내용</p></div>
                                                </div>
                                                <div class="clearfix"></div>
                                            </div>
                                        </th:block>

                                    </th:block>

                                </div>
                                <div class="message-reply sticky bottom-0 right-0 w-full bg-white">
                                    <input class="px-4" placeholder="Your Message"/>
                                    <button class="button ripple-effect ml-5">Send</button>
                                </div>
                                <!-- Message Content Inner / End -->
                                <!-- Reply Area -->

                            </div>

                        </div>
                    </th:block>
                </div>
            </div>

        </div>

    </div>




</body>
</html>