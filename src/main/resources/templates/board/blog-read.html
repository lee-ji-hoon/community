<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="theme-fragments.html :: head"></head>
<style>
    #utextDiv{
        overflow:hidden; word-wrap:break-word;
    }
</style>
<body>
    


    <div id="wrapper">

        <!-- Header -->
        <header th:replace="theme-fragments.html :: header"></header>

        <!-- sidebar -->
        <div th:replace="theme-fragments.html :: side_bar(currentSideMenu='board')"></div>

        <!-- Main Contents -->
        <div class="main_content">
            <div class="mcontainer">

                <div class="lg:flex lg:space-x-10">
                      
                    <div class="lg:w-3/4 space-y-5">
                        <div id="isUpdatedForm">
                            <div id="isUpdated"></div>
                        </div>
                        <div th:if="${isReportedMessage}">
                            <div th:replace="theme-fragments.html :: red-notice(message=${isReportedMessage})"></div>
                        </div>
                        <div class="card">
                            <div class="h-44 mb-4 md:h-72 overflow-hidden relative rounded-t-lg w-full">
                                <img src="/assets/images/blog/img-4.jpg" alt="" class="w-full h-full absolute inset-0 object-cover">
                            </div>
                            <div class="form_refresh">
                                <div class="p-7">
                                    <th:block th:if="${board.boardTitle=='자유'}">
                                        <h5 class="uppercase text-sm font-medium text-gray-400"> 자유게시글 </h5>
                                    </th:block>
                                    <th:block th:if="${board.boardTitle=='질문'}">
                                        <th:block th:if="${board.subBoardTitle == null || board.subBoardTitle == ''}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> 카테고리 없음 </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'major'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> 전공 질문 </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'college'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> 학교 생활 질문 </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'qnaEtc'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> 기타 질문 </h5>
                                        </th:block>
                                    </th:block>
                                    <th:block th:if="${board.boardTitle=='정보'}">
                                        <th:block th:if="${board.subBoardTitle == null || board.subBoardTitle == ''}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> 카테고리 없음 </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'web'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> <b>WEB</b> DEVELOPMENT </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'java'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> <b>JAVA</b> Programing </h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'media'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> <b>Image</b> Processing</h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'vrar'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> <b>Virtual</b> Reality</h5>
                                        </th:block>
                                        <th:block th:if="${board.subBoardTitle == 'infoEtc'}">
                                            <h5 class="uppercase text-sm font-medium text-gray-400"> Etc </h5>
                                        </th:block>
                                    </th:block>
                                    <h1 class="lg:text-3xl text-2xl font-semibold mt-4 mb-2" th:text="${board.title}">제목</h1>
                                    <th:block th:if="${board.boardTitle=='정보'}">
                                        <p th:text="${board.subTitle}"></p>
                                    </th:block>
                                    <div class="flex items-center space-x-3 my-4 pb-4 border-b border-gray-100">
                                        <svg th:if="${#strings.isEmpty(boardOwner?.profileImage)}"
                                             th:data-jdenticon-value="${boardOwner.nickname}"
                                             alt="" class="w-10 rounded-full is_avatar"></svg>
                                        <img th:if="${!#strings.isEmpty(boardOwner?.profileImage)}"
                                             th:src="${boardOwner?.profileImage}"
                                             alt="" class="w-10 rounded-full is_avatar"/>
                                        <div class="grid grid-cols-2 gap-4">
                                            <div>
                                                <div class="text-base font-semibold"><a th:href="@{/profile/{nickname}(nickname=${board.getWriter().nickname})}" th:text="${board.getWriter().nickname}"></a></div>
                                                <div class="text-xs" th:text="${service.boardDateTime(board.uploadTime)}">게시물 시간</div>
                                            </div>
                                            <!-- Board 작성자면 뜨는 수정폼 -->
                                            <th:block th:if="${boardOwner.id==account.id}">
                                                <div>
                                                    <a href="#create-post-modal" uk-toggle class="flex items-center justify-center h-10 w-10 z-10 rounded-full bg-blue-600 text-white absolute"
                                                       data-tippy-placement="right" title="게시물 수정하기">
                                                        <i class="fa fa-cog fa-2x" id="updateFormBtn"></i>
                                                    </a>
                                                    <!-- Craete video post modal -->
                                                    <div id="create-post-modal" class="create-post" uk-modal>
                                                        <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical shadow-2xl uk-animation-slide-bottom-small">

                                                            <div class="py-4 border-b flex  justify-between px-6">
                                                                <h3 class="text-lg font-semibold"> 게시글 작성하기 </h3>
                                                                <div>
                                                                    <button class="uk-modal-close-default hover:bg-gray-100 rounded-full p-2.5 block uk-icon uk-close mt-0.5"
                                                                            type="button" uk-close>
                                                                        <i class="icon-feather-close"></i>
                                                                    </button>
                                                                </div>
                                                            </div>

                                                            <form class="space-y-4 g:w-8/12" id="board_form" onsubmit="return false">
                                                                <div class="create-post-modal-body space-x-6 p-5 overflow-x-hidden mr-1 max-h-screen" data-simplebar>
                                                                    <div class="space-y-4 g:w-8/12">
                                                                        <div class="px-2 space-y-2 d-none">
                                                                            <div class="font-semibold text-base"> 게시판 bid </div>
                                                                            <input type="hidden" placeholder="bid를 입력해주세요." id="bid"
                                                                                   th:value="${board.bid}" name="bid" readonly
                                                                                   aria-describedby="writerHelp"
                                                                                   class="-mt-2 -mx-3 bg-transparent focus:bg-white focus:ring-gray-300 h-8 outline-none px-0 text-base w-full form-control">

                                                                        </div>
                                                                        <div class="font-semibold text-lg"> 게시글 수정 </div>
                                                                        <div class="border focus-within:border-blue-300 p-3 pb-0 rounded-md form-group d-none">
                                                                            <label for="writer" class="mb-0 ml-2 text-gray-600 text-sm">작성자</label>
                                                                            <input type="hidden" placeholder="닉네임 입력해주세요." id="writer"
                                                                                   th:value="${boardOwner.nickname}" name="writer" readonly
                                                                                   aria-describedby="writerHelp"
                                                                                   class="-mt-2 -mx-3 bg-transparent focus:bg-white focus:ring-gray-300 h-8 outline-none px-0 text-base w-full form-control">
                                                                        </div>
                                                                        <div class="border focus-within:border-blue-300 p-3 pb-0 rounded-md form-group">
                                                                            <label for="boardTitle" class="mb-0 ml-2 text-gray-600 text-sm">게시판 선택</label>
                                                                            <select class="" th:value="${board.boardTitle}" name="boardTitle" id="boardTitle">
                                                                                <option data-icon="icon-material-outline-assignment" value="자유게시판" th:selected="${board.boardTitle}=='자유게시판'">자유게시판</option>
                                                                                <option data-icon="icon-material-outline-access-alarm" value="신입생게시판" th:selected="${board.boardTitle}=='신입생게시판'">신입생게시판</option>
                                                                                <option data-icon="icon-material-outline-account-circle" value="졸업생게시판" th:selected="${board.boardTitle}=='졸업생게시판'">졸업생게시판</option>
                                                                            </select>
                                                                        </div>
                                                                        <div class="border focus-within:border-blue-300 p-3 pb-0 rounded-md form-group">
                                                                            <label for="title" class="mb-0 ml-2 text-gray-600 text-sm">Title</label>
                                                                            <input type="text" placeholder="제목을 입력해주세요." id="title"
                                                                                   name="title"
                                                                                   aria-describedby="titleHelp" required
                                                                                   th:value="${board.title}"
                                                                                   class="-mt-2 -mx-3 bg-transparent focus:bg-white focus:ring-gray-300 h-8 outline-none px-0 text-base w-full form-control">
                                                                        </div>
                                                                        <div class="border focus-within:border-blue-300 p-3 rounded-md form-group">
                                                                            <label for="content" class="mb-0 ml-2 text-gray-600 text-sm"> Description</label>
                                                                            <textarea type="text" rows="5" placeholder="내용을 입력해주세요." id="content" name="content"
                                                                                      aria-describedby="contentHelp" required
                                                                                      th:utext="${board.content}"
                                                                                      class="bg-transparent focus:bg-white focus:ring-gray-300 focus:shadow-none outline-none p-2 resize-none shadow-none text-base w-full form-control"></textarea>
                                                                        </div>

                                                                    </div>

                                                                </div>

                                                                <div class="flex items-center w-full justify-between p-3 border-t">

                                                                    <div class="flex items-center space-x-2">

                                                                        <div></div>

                                                                    </div>

                                                                    <div class="flex space-x-2">
                                                                        <a th:href="@{/board/detail/{boardId}/delete(boardId=${board.bid})}"
                                                                           class="bg-red-100 flex font-medium h-9 items-center justify-center px-5 rounded-md text-red-600 text-sm">
                                                                            삭제하기 </a>
                                                                        <button
                                                                                class="uk-modal-close bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium board_form_send">
                                                                            수정하기 </button>
                                                                    </div>

                                                                    <button hidden
                                                                            class="bg-blue-600 flex h-9 items-center justify-center rounded-lg text-white px-12 font-semibold board_form_send">
                                                                        수정하기 </button>
                                                                </div>
                                                            </form>

                                                        </div>
                                                    </div>
                                                </div>
                                            </th:block>
                                        </div>
                                    </div>
                                    <div id="utextDiv">
                                        <div class="space-y-3 content" th:utext="${board.content}"></div>
                                        <hr class="mt-4">
                                        <div class="float-left pl-2 pt-7">
                                            <div id="like_div" class="flex">
                                                <div  class="flex-none w-5">
                                                    <div th:if="${likes.isEmpty()}">
                                                        <form id="like_add">
                                                            <input type="hidden" id="like_boardId" name="like_boardId" th:value="${board.bid}"/>
                                                            <input type="hidden" id="like_accountId" name="like_accountId" th:value="${account.id}"/>
                                                            <div class="like-btn" uk-tooltip="Like">
                                                                <a class="like_heart_click">
                                                                    <i class="likeAddBtn uil-thumbs-up text-blue-500"></i>
                                                                </a>
                                                            </div>
                                                        </form>
                                                    </div>
                                                    <div th:if="${likes.isPresent()}">
                                                        <form id="like_cancel">
                                                            <input type="hidden" id="like_boardId" name="like_boardId" th:value="${board.bid}"/>
                                                            <input type="hidden" id="like_accountId" name="like_accountId" th:value="${account.id}"/>
                                                            <div class="like-btn" uk-tooltip="Unlike">
                                                                <a class="like_heart_click">
                                                                    <i class="likeDelBtn uil-thumbs-down text-red-500"></i>
                                                                </a>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                <span id="like_result" class="text-justify flex-none w-5" th:text="${likeService.boardLikeSize(board)}"></span>
                                                <div class="text-red-500 flex-none" uk-tooltip="신고하기">
                                                    <a th:href="@{/board/report/{boardId}(boardId = ${board.bid})}">
                                                        <i class="fa fa-bullhorn" aria-hidden="true"></i>
                                                        <span class="likes">신고</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 댓글 작성 폼 -->
                        <div class="card p-6 relative">
                            <h3 class="mb-8 mt-2 font-semibold text-xl"> 댓글 작성하기 </h3>
                            <div class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t">
                                <form id="reply_form" onsubmit="return false">
                                    <input type="hidden" id="r_board_id" name="r_board_id" class="form-control"
                                           value="1" th:value="${board.bid}" readonly>
                                    <input type="hidden" id="r_account_id" name="r_account_id" class="form-control"
                                           value="1" th:value="${account.id}" readonly>
                                    <input type="text" id="r_content" placeholder="여러분의 소중한 댓글을 입력해주세요." name="r_content" class="bg-transparent max-h-10 shadow-none px-5">
                                    <div class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl">
                                        <a class="write_reply">
                                            <ion-icon name="return-down-back-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>
                                        </a>
                                    </div>
                                </form>
                            </div>
                        </div>

                        <div class="card p-6">
                            <th:block th:if="${r_del_error_message}">
                                <div th:replace="theme-fragments.html :: red-notice(message=${r_del_error_message})"></div>
                            </th:block>
                            <th:block th:if="${r_del_complete_message}">
                                <div th:replace="theme-fragments.html :: blue-notice(message=${r_del_complete_message})"></div>
                            </th:block>
                            <div class="reply_div">
                                <h1 class="block text-lg font-semibold mb-4">Comments (<a th:text="${replyService.boardReplySize(board)}"></a>)</h1>

                                <div class="space-y-5">

                                    <div th:each="reply : ${reply}" class="flex gap-x-4 relative rounded-md">
                                        <svg th:if="${#strings.isEmpty(reply.getAccount()?.profileImage)}"
                                             th:data-jdenticon-value="${reply.getAccount().nickname}"
                                             alt="" class="rounded-full shadow w-12 h-12 is_avatar"></svg>
                                        <img th:if="${!#strings.isEmpty(reply.getAccount()?.profileImage)}"
                                             th:src="${reply.getAccount()?.profileImage}"
                                             alt="" class="rounded-full shadow w-12 h-12 is_avatar"/>
                                        <th:block th:if="${reply.getAccount().id == account.id}">
                                            <div class="absolute right-5 top-0 text-red-500" uk-tooltip="댓글 수정">
                                                <div class="reply_update_modal">
                                                    <a th:href="'#create-post-modal'+${reply.rid}" uk-toggle class="h-10 w-10 z-10 text-blue-500">
                                                        <i class="fa fa-cog" id="updateFormBtn1"></i>
                                                        <span>수정</span>
                                                    </a>
                                                    <!-- Craete video post modal -->
                                                    <div th:id="'create-post-modal'+${reply.rid}" class="create-post" uk-modal>
                                                        <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical shadow-2xl uk-animation-slide-bottom-small">

                                                            <div class="py-4 border-b flex  justify-between px-6">
                                                                <h3 class="text-lg font-semibold"> 댓글 수정하기 </h3>
                                                                <div>
                                                                    <button class="uk-modal-close-default hover:bg-gray-100 rounded-full p-2.5 block uk-icon uk-close mt-0.5"
                                                                            type="button" uk-close>
                                                                        <i class="icon-feather-close"></i>
                                                                    </button>
                                                                </div>
                                                            </div>

                                                            <form class="space-y-4 g:w-8/12" onsubmit="return false" id="reply_update_form">
                                                                <div class="create-post-modal-body space-x-6 p-5 overflow-x-hidden mr-1 max-h-fit" data-simplebar>
                                                                    <div class="space-y-4 g:w-8/12">
                                                                        <div class="font-semibold text-lg"> 댓글 수정 </div>
                                                                        <a th:text="${reply.rid}"></a>
                                                                        <div class="border focus-within:border-blue-300 p-3 pb-0 rounded-md form-group d-none">
                                                                            <label for="writer" class="mb-0 ml-2 text-gray-600 text-sm">rid</label>
                                                                            <input type="hidden" placeholder="닉네임 입력해주세요."
                                                                                   name="reply_update_rid" readonly th:value="${reply.rid}"
                                                                                   id="reply_update_rid"
                                                                                   class="-mt-2 -mx-3 bg-transparent focus:bg-white focus:ring-gray-300 h-8 outline-none px-0 text-base w-full form-control">
                                                                        </div>
                                                                        <div class="border focus-within:border-blue-300 p-3 rounded-md form-group">
                                                                            <label for="reply_update_content" class="mb-0 ml-2 text-gray-600 text-sm"> Description</label>
                                                                            <textarea type="text" rows="5" placeholder="내용을 입력해주세요." name="reply_update_content" id="reply_update_content"
                                                                                      required th:text="${reply.content}"
                                                                                      class="bg-transparent focus:bg-white focus:ring-gray-300 focus:shadow-none outline-none p-2 resize-none shadow-none text-base w-full form-control"></textarea>
                                                                        </div>

                                                                    </div>

                                                                </div>

                                                                <div class="flex items-center w-full justify-between p-3 border-t">

                                                                    <div class="flex items-center space-x-2">

                                                                        <div></div>

                                                                    </div>

                                                                    <div class="flex space-x-2">
                                                                        <a th:href="@{/board/detail/reply/delete/{rid}(rid=${reply.rid})}"
                                                                           class="bg-red-100 flex font-medium h-9 items-center justify-center px-5 rounded-md text-red-600 text-sm">
                                                                            삭제하기 </a>
                                                                        <button id = "update_reply"
                                                                                class="uk-modal-close bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium">
                                                                            수정하기 </button>
                                                                    </div>

                                                                    <button hidden
                                                                            class="bg-blue-600 flex h-9 items-center justify-center rounded-lg text-white px-12 font-semibold">
                                                                        수정하기 </button>
                                                                </div>
                                                            </form>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </th:block>
                                        <th:block th:if="${reply.getAccount().id != account.id}">
                                            <div class="absolute right-5 top-0 text-red-500" uk-tooltip="댓글 신고">
                                                <a th:href="@{/reply/report/{replyId}(replyId = ${reply.rid})}">
                                                    <i class="fa fa-bullhorn" aria-hidden="true"></i>
                                                    <span class="likes">신고</span>
                                                </a>
                                            </div>
                                        </th:block>
                                        <br>
                                        <!--<a href="#" class="bg-gray-100 py-1.5 px-4 rounded-full absolute right-5 top-0">Replay</a>-->
                                        <div>
                                            <a th:href="@{/profile/{nickname}(nickname=${reply.getAccount().nickname})}"><h4 class="text-base m-0 font-semibold" th:text="${reply.getAccount().nickname}">댓글 작성자</h4></a>
                                            <span class="text-gray-700 text-sm" th:text="${service.boardDateTime(reply.uploadTime)}"></span>
                                            <th:block th:if="${!reply.getIsReported}">
                                                <p class="mt-3 md:ml-0 -ml-16" th:text="${reply.content}">내용</p>
                                            </th:block>
                                            <th:block th:if="${reply.getIsReported}">
                                                <p class="mt-3 md:ml-0 -ml-16">신고된 댓글입니다.</p>
                                            </th:block>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                    <div class="lg:w-1/4 w-full"> 
   
                        <div uk-sticky="offset:100" class="uk-sticky">
  
                            <h2 class="text-lg font-semibold mb-3"> 최근 올라온 글</h2>
                            <ul>
                            <li th:each="recent : ${recentlyBoards}">
                                <a th:href="@{/board/detail/{boardId}(boardId = ${recent.bid})}" class="hover:bg-gray-100 rounded-md p-2 -mx-2 block">
                                    <h3 class="font-medium line-clamp-2" th:text="${recent.title}"></h3>
                                    <div class="flex items-center my-auto text-xs space-x-1.5">
                                        <div th:text="${service.boardDateTime(recent.uploadTime)}"></div> <div class="pb-1"> . </div>
                                        <ion-icon name="chatbox-ellipses-outline"></ion-icon> <div th:text="${replyService.boardReplySize(recent)}"></div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                            <br>
                          </div>


                    </div>

                </div>

        
            </div>
        </div>
        
    </div>
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <script type="application/javascript" th:inline="javascript">
        $(document).ready(function (){
            $('#content').summernote({
                placeholder: '글의 내용을 입력해주세요.<br/>타인에게 불쾌감을 주는 글은 예고없이 삭제됩니다.<br/>또한 신고가 누적될 시 제재가 있을 수 있습니다.',
                tabsize: 2,
                toolbar: [
                    ['font', ['bold', 'italic', 'underline', 'clear']],
                ],
                maxHeight: null,
                minHeight: null,
                lang : 'ko-KR',
                height: 500,
            });

            // input에 있는 값을 가져옴
            var input = document.getElementById("r_content");
            input.addEventListener('keypress', function(key){
                if (input.value == '' && key.key == 'Enter') {
                    alert("댓글을 입력해주세요.");
                }
                if(input.value != '' && key.key == 'Enter'){
                    $.ajax({
                        url:'/board/detail/reply',
                        type:'get',
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data : $('#reply_form').serialize(),
                        dataType : "json",
                        success : function (){
                            console.log("Write Reply Success");
                            $('.reply_div').load(location.href+' .reply_div');
                            input.value ='';
                        },
                        error : function (request, status, error){
                            console.log("Write Reply Fail" + error);
                        }
                    });
                }
            });
            $(document).on('click', '.like_heart_click', function() {
                // .like_heart_click은 <a></a>태그의 class 이름
                // 해당 태그를 클릭하면 진행되는 메소드
                if($(this).children('i').attr('class') == "likeAddBtn uil-thumbs-up text-blue-500"){
                    // this는 클릭한 태그 전역
                    // a 태그 하위에 있는 i 태그의 class가 fa fa-thumbs-up일 때
                    console.log("좋아요 실행");
                    $.ajax({
                        url:'/board/detail/like',
                        type:'get',
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data : $('#like_add').serialize(),
                        dataType : "json",
                        success : function (like_size){
                            console.log("Like Hit Success");
                            $("#like_result").html(like_size);
                            $('#like_div').load(location.href+' #like_div');
                            //$(".like_heart_click").html("좋아요 취소");
                        },
                        error : function (request, status, error){
                            console.log("Like Hit Fail" + error);
                        }
                    });
                }else if($(this).children('i').attr('class') == "likeDelBtn uil-thumbs-down text-red-500"){
                    console.log("좋아요 취소 실행");
                    $.ajax({
                        url:'/board/detail/like-cancel',
                        type:'get',
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data : $('#like_cancel').serialize(),
                        dataType : "json",
                        success : function (like_size){
                            console.log("Like Hit Success");
                            $("#like_result").html(like_size);
                            $('#like_div').load(location.href+' #like_div');
                            //$(".like_heart_click").html("좋아요");
                        },
                        error : function (request, status, error){
                            console.log("Like Hit Fail");
                        }
                    });
                }
            });
            /*$('#updateFormBtn').click(function () {
                console.log("업데이트 폼 버튼 클릭");
                console.log("isUpdated 비움");
                $('#isUpdated').load(window.location.href+' #isUpdated');
                console.log("isUpdated 새로고침");
            });*/
            $(document).on('click', '.write_reply', function() {
                if (input.value == '') {
                    alert("댓글을 입력해주세요.");
                }
                if (input.value != '') {
                    console.log("댓글 작성");
                    $.ajax({
                        url:'/board/detail/reply',
                        type:'get',
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data : $('#reply_form').serialize(),
                        dataType : "json",
                        success : function (){
                            console.log("Write Reply Success");
                            $('.reply_div').load(location.href+' .reply_div');
                            input.value ='';
                        },
                        error : function (request, status, error){
                            console.log("Write Reply Fail" + error);
                        }
                    });
                }
            });

            // 댓글 수정 ajax
            var reply_input = document.getElementById("reply_update_content");
            $(document).on('click', '#update_reply', function() {
                if (reply_input.value == '') {
                    alert("댓글을 입력해주세요.");
                }
                if (reply_input.value != '') {
                    console.log("댓글 수정");
                    $.ajax({
                        url:'/board/detail/reply/update',
                        type:'get',
                        contentType: "application/x-www-form-urlencoded; charset=utf-8",
                        data : $('#reply_update_form').serialize(),
                        dataType : "json",
                        success : function (){
                            console.log("Reply Update Success");
                            $('.reply_div').load(location.href+' .reply_div');
                            $('#reply_update_form').load(location.href+' #reply_update_form');
                        },
                        error : function (request, status, error){
                            console.log("Reply Update Fail" + error);
                        }
                    });
                }
            });

            // 게시글 업데이트
            $(document).on('click', '.board_form_send', function() {
                console.log("Board Update 실행");
                $.ajax({
                    url:'/board/detail/update',
                    type:'get',
                    contentType: "application/x-www-form-urlencoded; charset=utf-8",
                    data : $('#board_form').serialize(),
                    success : function (message){
                        console.log("Board Update Success");
                        $('.form_refresh').load(window.location.href+' .form_refresh');
                        $("#isUpdatedForm").html('<div id="isUpdated"></div>');
                        $("#isUpdated").replaceWith(message);
                    },
                    error : function (request, status, error){
                        console.log("Board Update " + error);
                    }
                });
            });

        })
    </script>

</body>
</html>