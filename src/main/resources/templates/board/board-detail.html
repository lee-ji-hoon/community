<!DOCTYPE html>
<html lang="ko"
      class="no-js"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">

<body>
<main layout:fragment="main">
    <div class="breadcrumb-area py-0">
        <div class="breadcrumb">
            <ul class="m-0">
                <li>
                    <th:block th:if="${board.getBoardTitle().equals('자유')}">
                        <a th:href="@{/board/free}">자유게시판</a>
                    </th:block>
                    <th:block th:if="${board.getBoardTitle().equals('정보')}">
                        <a th:href="@{/board/forum}">정보게시판</a>
                    </th:block>
                    <th:block th:if="${board.getBoardTitle().equals('질문')}">
                        <a th:href="@{/board/qna}">질문게시판</a>
                    </th:block>
                </li>
                <li>
                    <a style="font-weight: bold"> 상세보기</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="lg:flex lg:space-x-10">

        <div class="lg:w-3/4 space-y-5 mb-3">
            <div id="isUpdatedForm">
                <div id="isUpdated"></div>
            </div>
            <div th:if="${isUpdatedMessage}">
                <div th:replace="theme-fragments.html :: blue-notice(message=${isUpdatedMessage})"></div>
            </div>
            <div th:if="${isReportedMessage}">
                <div th:replace="theme-fragments.html :: red-notice(message=${isReportedMessage})"></div>
            </div>
            <div th:if="${errorMessage}">
                <div th:replace="theme-fragments.html :: red-notice(message=${errorMessage})"></div>
            </div>
            <div class="card">
                <div class="form_refresh">
                    <div class="p-7">
                        <th:block th:if="${board.boardTitle=='자유'}">
                            <h5 class="uppercase text-sm font-medium text-gray-400"> 자유게시글 </h5>
                        </th:block>
                        <th:block th:if="${board.boardTitle=='질문'}">
                            <th:block th:if="${board.subBoardTitle == null || board.subBoardTitle == ''}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> 카테고리 없음 </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'major'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> 전공 질문 </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'college'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> 학교 생활 질문 </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'qnaEtc'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> 기타 질문 </h5>
                            </th:block>
                        </th:block>
                        <th:block th:if="${board.boardTitle=='정보'}">
                            <th:block th:if="${board.subBoardTitle == null || board.subBoardTitle == ''}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> 카테고리 없음 </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'web'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> <b>WEB</b> DEVELOPMENT </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'java'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> <b>JAVA</b> Programing </h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'media'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> <b>Image</b> Processing</h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'vrar'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> <b>Virtual</b> Reality</h5>
                            </th:block>
                            <th:block th:if="${board.subBoardTitle == 'infoEtc'}">
                                <h5 class="uppercase text-sm font-medium text-gray-400"> Etc </h5>
                            </th:block>
                        </th:block>
                        <h1 class="lg:text-3xl text-2xl font-semibold mt-4 mb-2" th:text="${board.title}">제목</h1>
                        <th:block th:if="${board.boardTitle=='정보'}">
                            <p th:text="${board.subTitle}"></p>
                        </th:block>
                        <div class="flex items-center space-x-3 pb-4 border-b border-gray-100">
                            <img th:if="${#strings.isEmpty(board.getWriter()?.profileImage)}"
                                 th:data-id="${board.getWriter().studentId}"
                                 alt="" class="identicon w-10 h-10 rounded-full is_avatar"/>
                            <img th:if="${!#strings.isEmpty(board.getWriter()?.profileImage)}"
                                 th:src="${board.getWriter()?.profileImage}"
                                 alt="" class="w-10 h-10 rounded-full is_avatar"/>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <div class="text-base font-semibold"><a th:href="@{/profile/{nickname}/view(nickname=${board.getWriter().nickname})}" th:text="${board.getWriter().nickname}"></a></div>
                                    <div class="text-xs" th:text="${@ut.setDateTime(board.getCreateDate())}">게시물 시간</div>
                                </div>
                                <!-- Board 작성자면 뜨는 수정폼 -->
                                <th:block sec:authorize="isAuthenticated()" th:if="${board.getWriter().id==account.id}">
                                    <div>
                                        <a href="#create-post-modal" uk-toggle class="flex items-center justify-center h-10 w-10 z-10 rounded-full bg-blue-600 text-white absolute"
                                           data-tippy-placement="right" title="게시물 수정하기">
                                            <i class="fa fa-cog fa-2x" id="updateFormBtn"></i>
                                        </a>
                                        <!-- Craete video post modal -->
                                        <div id="create-post-modal" uk-modal>
                                            <div class="uk-modal-dialog">
                                                <button class="uk-modal-close-default hover:bg-gray-100 rounded-full p-2.5 block uk-icon uk-close mt-0.5"
                                                        type="button" uk-close>
                                                    <i class="icon-feather-close"></i>
                                                </button>

                                                <div class="uk-modal-header bg-white">
                                                    <h3 class="text-lg font-semibold" id="forum_head"> 게시글 수정하기 </h3>
                                                </div>
                                                <form class="needs-validation" id="board_form" onsubmit="return false">
                                                    <div class="uk-modal-body" uk-overflow-auto>
                                                        <div class="space-y-4 g:w-8/12">
                                                            <div class="form-group">
                                                                <label for="post_sort"> 유형 선택 </label>
                                                                <select id="post_sort" name="post_sort"  class="shadow-none with-border px-2">
                                                                    <option data-icon="icon-material-outline-assignment" value="자유" th:selected="${board.boardTitle}=='자유'">자유</option>
                                                                    <option data-icon="icon-material-outline-help-outline" value="질문" th:selected="${board.boardTitle}=='질문'">질문</option>
                                                                    <option data-icon="icon-material-outline-assignment" value="정보" th:selected="${board.boardTitle}=='정보'">정보</option>
                                                                </select>
                                                            </div>
                                                            <div id="subBoardSort">
                                                                <div class="form-group">
                                                                    <label for="post_sub_sort"> 종류 선택 </label>
                                                                    <select id="post_sub_sort" name="post_sub_sort" class="shadow-none with-border form-control px-2">
                                                                        <optgroup label="QnA" id="opgQnA">
                                                                            <option data-icon="icon-material-outline-help-outline" value="" hidden>선택</option>
                                                                            <option data-icon="icon-material-outline-help-outline" value="major" th:selected="${board.subBoardTitle}=='major'">전공 관련</option>
                                                                            <option data-icon="icon-material-outline-help-outline" value="college" th:selected="${board.subBoardTitle}=='college'">학교 관련</option>
                                                                            <option data-icon="icon-material-outline-movie" value="qnaEtc" th:selected="${board.subBoardTitle}=='qnaEtc'"> 기타 </option>
                                                                        </optgroup>
                                                                        <optgroup label="정보" id="opgInfo">
                                                                            <option data-icon="icon-material-outline-language" value="web" th:selected="${board.subBoardTitle}=='web'"> HTML</option>
                                                                            <option data-icon="icon-material-outline-code" value="java" th:selected="${board.subBoardTitle}=='java'"> JAVA</option>
                                                                            <option data-icon="icon-material-outline-movie" value="media" th:selected="${board.subBoardTitle}=='media'"> 영상</option>
                                                                            <option data-icon="icon-material-outline-movie" value="vrar" th:selected="${board.subBoardTitle}=='vrar'"> VR/AR</option>
                                                                            <option data-icon="icon-material-outline-movie" value="infoEtc" th:selected="${board.subBoardTitle}=='infoEtc'"> 기타 </option>
                                                                        </optgroup>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="font-semibold text-lg"> Details </div>
                                                            <!-- 제목 -->
                                                            <div class="form-group">
                                                                <div class="line">
                                                                    <input class="line__input form-control" id="post_title" name="post_title" type="text"
                                                                           th:value="${board.title}"
                                                                           aria-describedby="titleHelp" required max="30" autocomplete="off">
                                                                    <span for="post_title" class="line__placeholder"> 제목 </span>
                                                                </div>
                                                                <small id="titleHelp" class="form-text text-muted">
                                                                    제목은 2글자부터 최대 30글자까지 입력 가능합니다.
                                                                </small>
                                                                <small class="invalid-feedback">제목을 입력해주세요.</small>
                                                            </div>
                                                            <!-- 소제목 -->
                                                            <div id="postTitleSub" class="form-group">
                                                                <div class="line">
                                                                    <input class="line__input form-group" id="post_sub_title" name="post_sub_title"
                                                                           th:value="${board.subTitle}"
                                                                           type="text" onkeyup="this.setAttribute('value', this.value);"
                                                                           aria-describedby="subTitleHelp" autocomplete="off">
                                                                    <span for="username" class="line__placeholder"> 소제목 </span>
                                                                </div>
                                                                <small id="subTitleHelp" class="form-text text-muted">
                                                                    예) Spring MVC 모델에 대해 자세히 알아보는 글입니다.
                                                                </small>
                                                            </div>
                                                            <!-- 본문 -->
                                                            <div class="form-group">
                                                                <div>
                                                                            <textarea class="form-control"  id="post_content" name="post_content" th:utext="${board.content}"
                                                                                      type="text" aria-describedby="contentHelp" required></textarea>
                                                                </div>
                                                                <small id="contentHelp" class="form-text text-muted">남을 비방하는 글은 제제가 있을 수 있습니다.</small>
                                                                <small class="invalid-feedback">글을 입력해주세요.</small>
                                                            </div>
                                                            <div class="col-span-2">
                                                                <div uk-form-custom class="w-full py-3">
                                                                    <div class="bg-gray-100 border-2 border-dashed flex flex-col h-32 items-center justify-center relative w-full rounded-lg dark:bg-gray-800 dark:border-gray-600">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-12">
                                                                            <path d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z" />
                                                                            <path d="M9 13h2v5a1 1 0 11-2 0v-5z" />
                                                                        </svg>
                                                                    </div>
                                                                    <input id="input_file" multiple="multiple" type="file" accept="image/png, image/jpeg">
                                                                </div>

                                                                <span class="text-gray-500 text-xs">※첨부파일은 최대 6개까지 등록이 가능합니다.</span>
                                                            </div>

                                                            <div class="col-span-2">
                                                                <br/>
                                                                <div id="refreshForm" class="refreshForm" name="refreshForm">
                                                                    <div class="grid sm:grid-cols-3 grid-cols-2" id="articlefileChange">
                                                                        <div th:each="image : ${board.imageList}"
                                                                             class="mx-1">
                                                                            <a href="#" th:onclick="|imageDeleteInit(${image.id})|"> 삭제 </a>
                                                                            <img th:src="${image.getImagePath()}"
                                                                                 classname="article-image"
                                                                                 style="width: 150px; height:200px;"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="uk-modal-footer uk-text-right bg-white">
                                                        <th:block th:if="${board.reportCount > 0}">
                                                            <div class="items-center space-x-2 mt-2">
                                                                <div> <b class="text-red-500">신고된 게시글</b>은 수정 및 삭제할 수 없습니다. </div>
                                                            </div>
                                                        </th:block>
                                                        <th:block th:if="${board.reportCount == 0}">
                                                            <a th:href="@{/board/detail/{boardId}/delete(boardId=${board.id})}" class="bg-red-500 font-medium h-9 items-center justify-center px-5 rounded-md text-white text-sm py-2.5">삭제하기</a>
                                                            <button type="submit" onclick="updateProject()" class="bg-blue-600 h-9 items-center justify-center rounded-md text-white px-5 font-medium">수정하기</button>
                                                        </th:block>
                                                    </div>
                                                </form>


                                            </div>
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                        </div>
                        <th:block th:if="${board.getImageList().size() != 0}">
                            <div id="imageRefreshForm" class="imageRefreshForm mb-4">
                                <div class="uk-container mt-4" uk-slider>
                                    <div class="uk-position-relative uk-visible-toggle uk-light">
                                        <div class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m">
                                            <div th:each="image : ${board.getImageList()}">
                                                <a th:href="${image.getImagePath()}" data-fancybox="gallery">
                                                    <img class="rounded" style="width: 200px; height: 150px;"
                                                         th:src="${image.getImagePath()}"/>
                                                </a>
                                            </div>
                                        </div>
                                        <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
                                        <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
                                    </div>
                                </div>
                            </div>
                            <hr class="pb-2">
                        </th:block>
                        <div id="blk_div">
                            <div class="space-y-3 content mt-4" id="utextDiv" th:utext="${board.content}"></div>
                            <hr class="my-4">
                            <div id="like_div" class="flex" sec:authorize="isAuthenticated()">
                                <div class="flex-none w-5">
                                    <div th:if="${!likes}">
                                        <form id="like_add">
                                            <input type="hidden" id="like_postId" name="like_postId" th:value="${board.id}"/>
                                            <input type="hidden" id="like_postSort" name="like_postSort" value="board"/>
                                            <div uk-tooltip="좋아요">
                                                <a class="like_heart_click text-sm">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="likeAddBtn text-blue-500" fill="currentColor">
                                                        <path d="M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"/>
                                                    </svg>
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                    <div th:if="${likes}">
                                        <form id="like_cancel">
                                            <input type="hidden" id="like_postId" name="like_postId" th:value="${board.id}"/>
                                            <input type="hidden" id="like_postSort" name="like_postSort" value="board"/>
                                            <div uk-tooltip="좋아요 취소">
                                                <a class="like_heart_click">
                                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="likeDelBtn text-red-500" fill="currentColor">
                                                        <path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/>
                                                    </svg>
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="flex-none mr-2">
                                    <span id="like_result" class="text-justify flex-none w-5 ml-1" th:text="${board.likesList.size()}"></span>
                                </div>
                                <div class="flex-none w-5 mr-2" id="bookmark_div">
                                    <div th:if="${!bookmark}">
                                        <form id="bookmarkAdd">
                                            <input type="hidden" id="postId" name="postId" th:value="${board.id}"/>
                                            <input type="hidden" id="postSort" name="postSort" value="board"/>
                                            <div uk-tooltip="북마크">
                                                <a class="bookmark_click">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 48 48" id="bookmarkAddBtn" class="text-gray-500 font-bold" fill="currentColor">
                                                        <path d="M34 6h-20c-2.21 0-3.98 1.79-3.98 4l-.02 32 14-6 14 6v-32c0-2.21-1.79-4-4-4zm0 30l-10-4.35-10 4.35v-26h20v26z"/>
                                                    </svg>
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                    <div th:if="${bookmark}">
                                        <form id="bookmarkCancel">
                                            <div uk-tooltip="북마크 해제">
                                                <input type="hidden" id="postId" name="postId" th:value="${board.id}"/>
                                                <input type="hidden" id="postSort" name="postSort" value="board"/>
                                                <a class="bookmark_click">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 48 48" id="bookmarkDelBtn" class="text-blue-500 font-bold" fill="currentColor">
                                                        <path d="M34 6h-20c-2.21 0-3.98 1.79-3.98 4l-.02 32 14-6 14 6v-32c0-2.21-1.79-4-4-4zm0 30l-10-4.35-10 4.35v-26h20v26z"/>
                                                    </svg>
                                                </a>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <th:block sec:authorize="isAuthenticated()" th:if="${board.writer != account}">
                                    <div class="text-red-500 flex-none" uk-tooltip="신고하기">
                                        <a th:href="@{/board/report/{boardId}(boardId = ${board.id})}">
                                            <i class="fa fa-bullhorn fa-lg" aria-hidden="true"></i>
                                            <span class="likes">신고</span>
                                        </a>
                                    </div>
                                </th:block>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div th:if="${isReportedReplyMessage}">
                <div th:replace="theme-fragments.html :: red-notice(message=${isReportedReplyMessage})"></div>
            </div>
            <div th:if="${reportCompleteMessage}">
                <div th:replace="theme-fragments.html :: blue-notice(message=${reportCompleteMessage})"></div>
            </div>
            <!-- 댓글 작성 폼 -->
            <div class="card p-6 relative" sec:authorize="isAuthenticated()">
                <h3 class="mb-5 mt-2 font-semibold text-xl"> 댓글 작성하기 </h3>
                <div class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-b">
                    <form id="reply_form" onsubmit="return false">
                        <input type="hidden" id="r_postId" name="r_postId"
                               th:value="${board.id}" readonly>
                        <input type="hidden" id="r_postSort" name="r_postSort"
                               value="board" readonly>
                        <input autocomplete="off" type="text" id="r_content" placeholder="여러분의 소중한 댓글을 입력해주세요." name="r_content" class="bg-transparent max-h-10 shadow-none px-5">
                        <div class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl">
                            <a class="write_reply">
                                <ion-icon name="return-down-back-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>
                            </a>
                        </div>
                    </form>
                </div>
            </div>
            <div id="isDeletedForm">
                <div id="isDeleted"></div>
            </div>
            <div class="card p-6">
                <div class="reply_div">
                    <h1 class="block text-lg font-semibold mb-4">Comments (<a th:text="${board.replyList.size()}"></a>)</h1>

                    <div class="bg-gray-100 relative dark:bg-gray-800 border-b" sec:authorize="isAnonymous()">
                        <p>댓글은 <a class="font-bold text-warning" th:href="@{/login}">로그인</a>한 후에 확인할 수 있습니다.</p>
                    </div>

                    <div class="space-y-5" sec:authorize="isAuthenticated()">
                        <div th:each="reply : ${board.replyList}" class="flex gap-x-4 relative rounded-md">
                            <img th:if="${#strings.isEmpty(reply.getAccount()?.profileImage)}"
                                 th:data-id="${reply.getAccount().studentId}" style="width: 48px; height: 48px;"
                                 alt="" class="identicon rounded-full shadow w-12 h-12 is_avatar"/>
                            <img th:if="${!#strings.isEmpty(reply.getAccount()?.profileImage)}"
                                 th:src="${reply.getAccount()?.profileImage}" style="width: 48px; height: 48px;"
                                 alt="" class="rounded-full shadow w-12 h-12 is_avatar"/>
                            <th:block th:if="${reply.getAccount().id == account.id}">
                                <div class="absolute right-16 top-0 text-blue-500" uk-tooltip="댓글 수정" th:onclick="|updateBtn.replyUpdate(${reply.rid})|" th:id="|replyUpdateBtn${reply.rid}|">
                                    <a>
                                        <span>수정</span>
                                    </a>
                                </div>
                                <div class="absolute right-16 top-0 text-blue-500 updateSubmit hidden" uk-tooltip="댓글 수정" th:onclick="|updateComplete.replyUpdateAjax(${reply.rid})|" th:id="|replyUpdateSubmit${reply.rid}|">
                                    <a>
                                        <span>등록</span>
                                    </a>
                                </div>
                                <div class="absolute right-5 top-0 text-red-500" uk-tooltip="댓글 삭제" th:onclick="|deleteReplyBtn.deleteReply(${reply.rid})|" th:id="|replyDeleteSubmit${reply.rid}|">
                                    <a>
                                        <span class="likes">삭제</span>
                                        <form onsubmit="return false" th:id="|replyDeleteForm${reply.rid}|" class="d-none">
                                            <input type="hidden" th:value="${reply.rid}" name="reply_delete_rid">
                                        </form>
                                    </a>
                                </div>
                            </th:block>
                            <th:block th:if="${reply.getAccount().id != account.id}">
                                <div class="absolute right-5 top-0 text-red-500" uk-tooltip="댓글 신고">
                                    <a th:href="@{/reply/report/{replyId}(replyId = ${reply.rid})}">
                                        <i class="fa fa-bullhorn" aria-hidden="true"></i>
                                        <span class="likes">신고</span>
                                    </a>
                                </div>
                            </th:block>
                            <br>
                            <!--<a href="#" class="bg-gray-100 py-1.5 px-4 rounded-full absolute right-5 top-0">Replay</a>-->
                            <div class="w-full">
                                <a th:href="@{/profile/{nickname}/view(nickname=${reply.getAccount().nickname})}"><h4 class="text-base m-0 font-semibold" th:text="${reply.getAccount().nickname}">댓글 작성자</h4></a>
                                <span class="text-gray-700 text-sm" th:text="${@ut.setDateTime(reply.uploadTime)}"></span>
                                <th:block th:if="${!reply.getIsReported}">
                                    <form onsubmit="return false" th:id="|replyUpdateForm${reply.rid}|">
                                        <input type="hidden" th:value="${reply.rid}" name="reply_update_rid">

                                        <p class="mt-3 md:ml-0 -ml-16" th:text="${reply.content}" th:id="|orginalReply${reply.rid}|">내용</p>
                                        <input type="hidden" th:value="${reply.content}" name="reply_update_content" th:id="|replyUpdateInput${reply.rid}|">
                                    </form>

                                </th:block>
                                <th:block th:if="${reply.getIsReported}">
                                    <p class="mt-3 md:ml-0 -ml-16">신고된 댓글입니다.</p>
                                </th:block>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <div class="lg:w-1/4 w-full">
            <div uk-sticky="offset:100" class="uk-sticky">
                <div class="card divide-y divide-gray-100 px-4 mb-4">
                    <h2 class="text-lg font-semibold my-3">실시간 인기글</h2>
                    <ul>
                        <li th:each="t_board : ${top5Board}">
                            <a th:href="@{/board/detail/{boardId}(boardId = ${t_board.id})}" class="hover:bg-gray-100 rounded-md p-2 -mx-2 block">
                                <h3 class="font-medium line-clamp-1" th:text="${t_board.title}"></h3>
                                <div class="clear-both pt-2 flex items-center my-auto text-xs space-x-1.5">
                                    <th:block th:if="${t_board.boardTitle=='자유'}">
                                        <div class="bg-blue-100 font-semibold w-10 px-1.5 py-1 rounded-full text-center text-xs text-blue-500" th:text="${t_board.boardTitle}"></div>
                                    </th:block>
                                    <th:block th:if="${t_board.boardTitle=='정보'}">
                                        <div class="bg-purple-100 font-semibold w-10 px-1.5 py-1 rounded-full text-center text-xs text-purple-500" th:text="${t_board.boardTitle}"></div>
                                    </th:block>
                                    <th:block th:if="${t_board.boardTitle=='질문'}">
                                        <div class="bg-yellow-100 font-semibold w-10 px-1.5 py-1 rounded-full text-center text-xs text-yellow-500" th:text="${t_board.boardTitle}"></div>
                                    </th:block>
                                    <div class="pb-1"> . </div>
                                    <ion-icon name="time-outline"></ion-icon>
                                    <div th:text="${@ut.setDateTime(t_board.createDate)}"></div>
                                    <div class="pb-1"> . </div>
                                    <ion-icon name="chatbox-ellipses-outline"></ion-icon>
                                    <div th:text="${t_board.getReplyList().size()}"></div>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <div th:replace="fragments/bookmark-fragments :: bookmarkAjax"></div>
    <div th:replace="fragments/like-fragments :: likeAjax"></div>
    <div th:replace="fragments/reply-fragments :: replyAjax"></div>
    <script src="/node_modules/@fancyapps/ui/dist/fancybox.umd.js"></script>
    <link rel="stylesheet" href="/node_modules/@fancyapps/ui/dist/fancybox.css">
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
    <script th:replace="theme-fragments.html :: form-validation"></script>
    <script th:replace="theme-fragments.html :: s3-board-image-upload(uploadUrl = '/board/'+ ${board.id} +'/update')"></script>
    <script type="application/javascript" th:inline="javascript">
        function imageDeleteInit(id) {
            $.ajax({
                type: "GET",
                contentType: "application/x-www-form-urlencoded; charset=utf-8",
                url: "/s3/image/delete",
                data: {"imageId": id},
                success : function (){
                    $('.refreshForm').load(location.href+' .refreshForm');
                    $('.imageRefreshForm').load(location.href+' .imageRefreshForm');
                },
            })
        }
        $(document).ready( function() {
            $('#post_content').summernote({
                placeholder: '글의 내용을 입력해주세요.<br/>타인에게 불쾌감을 주는 글은 예고없이 삭제됩니다.<br/>또한 신고가 누적될 시 제재가 있을 수 있습니다.',
                tabsize: 2,
                toolbar: [
                    ['font', ['bold', 'italic', 'underline', 'clear']],
                ],
                maxHeight: null,
                minHeight: null,
                lang : 'ko-KR',
                height: 500,
            });

            function resetValue() {
                $('#post_title').val('');
                $('#post_sub_title').val('');
            }
            $('#postTitle').val('');
            jQuery('#post_sort').change(function() {
                var state = jQuery('#post_sort option:selected').val();
                if (state == '자유') {
                    // 작성 값 초기화 및 메뉴명 변경
                    $("#forum_head").text('글 작성하기');
                    $('#titleHelp').text("글의 주제를 나타내는 제목을 작성해주세요.");
                    $('#subTitleHelp').text("");
                    $('#contentHelp').text("정치 및 저격 등 수준 낮은 게시글은 예고 없이 삭제됩니다.");
                    resetValue();

                    // 자유게시판일 경우 SubTitle 빈값
                    $("#post_sub_sort option:eq(0)").prop("selected", true);

                    // Hide and Show
                    jQuery('#subBoardSort').hide();
                    jQuery('#postTitleSub').hide();
                    //$('#post_sub_sort').selectpicker('refresh');
                    //$('#board_form').load(window.location.href+' #board_form');
                }
                if (state == '질문') {
                    // 작성 값 초기화 및 메뉴명 변경
                    $("#forum_head").text('Q&A 작성하기');
                    $('#titleHelp').text("무엇이 궁금한가요?");
                    $('#subTitleHelp').text("");
                    $('#contentHelp').text("궁금한 내용을 최대한 자세하게 작성해주세요.");
                    resetValue();

                    // 질문게시판일 경우 SubTitle 선택 selected
                    $("#post_sub_sort option:eq(0)").prop("selected", true);

                    // Hide and Show
                    jQuery('#opgQnA').show();
                    jQuery('#opgInfo').hide();
                    jQuery('#subBoardSort').show();
                    jQuery('#postTitleSub').hide();
                    //$('#post_sub_sort').selectpicker('refresh');
                    //$('#board_form').load(window.location.href+' #board_form');
                }
                if (state == '정보') {
                    // 작성 값 초기화 및 메뉴명 변경
                    $("#forum_head").text('정보 작성하기');
                    $('#titleHelp').text("공유하려는 정보의 주제를 작성해주세요.");
                    $('#subTitleHelp').text("해당 글을 어필하는 소제목을 작성해주세요.");
                    $('#contentHelp').text("정보에 대한 내용을 자세히 설명해주세요.");
                    resetValue();

                    // 정보게시판일 경우 SubTitle 선택 selected
                    $("#post_sub_sort option:eq(0)").prop("selected", true);

                    // Hide and Show
                    jQuery('#opgQnA').hide();
                    jQuery('#opgInfo').show();
                    jQuery('#subBoardSort').show();
                    jQuery('#postTitleSub').show();
                    //$('#post_sub_sort').selectpicker('refresh');
                    //$('#board_form').load(window.location.href+' #board_form');
                }
            });
        });
    </script>
</main>

</body>
</html>